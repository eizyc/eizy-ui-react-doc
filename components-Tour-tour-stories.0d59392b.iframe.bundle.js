"use strict";(self.webpackChunk_eizyui_eizy_ui_react=self.webpackChunk_eizyui_eizy_ui_react||[]).push([[922],{"./src/components/Tour/tour.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>tour_stories});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),utils_const=__webpack_require__("./src/utils/const.ts"),hooks=__webpack_require__("./src/utils/hooks/index.ts"),Overlay=__webpack_require__("./src/components/Overlay/index.tsx"),Button=__webpack_require__("./src/components/Button/index.tsx");let getMaskStyle=(element,container)=>{if(!element)return{};element.scrollIntoView({block:"center",inline:"center",behavior:"smooth"});let{height,width,left,top}=element.getBoundingClientRect(),elementTopWithScroll=container.scrollTop+top,elementLeftWithScroll=container.scrollLeft+left;return{width:container.scrollWidth,height:container.scrollHeight,borderTopWidth:Math.max(elementTopWithScroll,0),borderLeftWidth:Math.max(elementLeftWithScroll,0),borderBottomWidth:Math.max(container.scrollHeight-height-elementTopWithScroll,0),borderRightWidth:Math.max(container.scrollWidth-width-elementLeftWithScroll,0)}};var useEvent=__webpack_require__("./src/utils/hooks/useEvent.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");let prefixCls="".concat(utils_const.J,"-tour"),Tour=props=>{var _steps$currentStep,_currentStepInfo$prev,_currentStepInfo$next;let{className,open,step,steps,onChange,onFinish,defaultStep,getContainer}=props;(0,react.useRef)(!1);let[maskStyle,setMaskStyle]=(0,react.useState)({}),[animationStyle,setAnimationStyle]=(0,react.useState)({transition:"none"}),[currentStep,setCurrentStep]=(0,hooks.C8)(0,{value:step,defaultValue:defaultStep,onChange}),_onFinish=(0,useEvent.Z)(onFinish),selectedElement=open?null==steps?void 0:null===(_steps$currentStep=steps[currentStep])||void 0===_steps$currentStep?void 0:_steps$currentStep.target():null,containerElement=(null==getContainer?void 0:getContainer())||document.documentElement,[currentStepInfo,end]=(0,react.useMemo)(()=>[(null==steps?void 0:steps[currentStep])||{},currentStep===(null==steps?void 0:steps.length)],[currentStep,steps]);(0,hooks.rf)(()=>{end&&(_onFinish(),setCurrentStep(0),setAnimationStyle({transition:"none"}))},[end,_onFinish]),(0,react.useLayoutEffect)(()=>{let observer;return selectedElement&&containerElement?(observer=new ResizeObserver(()=>{setMaskStyle(getMaskStyle(selectedElement,containerElement))})).observe(containerElement):setMaskStyle({transition:"none"}),()=>{var _observer;null===(_observer=observer)||void 0===_observer||_observer.disconnect()}},[containerElement,selectedElement]);let{renderContent}=currentStepInfo,content=renderContent?renderContent(currentStep):(0,jsx_runtime.jsxs)("div",{className:"".concat(prefixCls,"-content"),children:[(0,jsx_runtime.jsx)("div",{className:"".concat(prefixCls,"-title"),children:currentStepInfo.title}),(0,jsx_runtime.jsx)("div",{className:"".concat(prefixCls,"-description"),children:currentStepInfo.description})]}),operation=(0,jsx_runtime.jsxs)("div",{className:"".concat(prefixCls,"-operation"),children:[0!==currentStep&&(0,jsx_runtime.jsx)("div",{className:"prev",onClick:()=>prev(),children:(null===(_currentStepInfo$prev=currentStepInfo.prevButtonProps)||void 0===_currentStepInfo$prev?void 0:_currentStepInfo$prev.children)||(0,jsx_runtime.jsx)(Button.Z,{size:"sm",children:"Back"})}),(0,jsx_runtime.jsx)("div",{className:"next",onClick:()=>next(),children:(null===(_currentStepInfo$next=currentStepInfo.nextButtonProps)||void 0===_currentStepInfo$next?void 0:_currentStepInfo$next.children)||(0,jsx_runtime.jsx)(Button.Z,{size:"sm",children:currentStep===(null==steps?void 0:steps.length)-1?"Done":"Next"})})]}),prev=async()=>{if(currentStep<=0)return;let{beforePrev}=currentStepInfo;await (null==beforePrev?void 0:beforePrev(currentStep)),setCurrentStep(val=>val-1),setAnimationStyle({})},next=async()=>{if(currentStep>(null==steps?void 0:steps.length))return;let{beforeNext}=currentStepInfo;await (null==beforeNext?void 0:beforeNext(currentStep)),setCurrentStep(val=>val+1),setAnimationStyle({})},classes=classnames_default()(prefixCls,className,{});return open?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Overlay.Z.WithArrow,{trigger:selectedElement,value:!0,className:classes,mask:!0,maskClassName:"".concat(prefixCls,"-mask"),maskStyle:{...maskStyle,...animationStyle},arrowSize:8,arrowOffsetX:12,arrowOffsetY:8,gap:4,placement:(null==currentStepInfo?void 0:currentStepInfo.placement)||"bottom",children:(0,jsx_runtime.jsxs)("div",{className:"".concat(prefixCls,"-inner"),children:[content,operation]})})}):null};Tour.defaultProps={};try{Tour.displayName="Tour",Tour.__docgenInfo={description:"",displayName:"Tour",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},step:{defaultValue:null,description:"",name:"step",required:!1,type:{name:"number"}},defaultStep:{defaultValue:null,description:"",name:"defaultStep",required:!1,type:{name:"number"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"TourStepProps[]"}},getContainer:{defaultValue:null,description:"",name:"getContainer",required:!1,type:{name:"(() => HTMLElement)"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!1,type:{name:"(() => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((currentStep: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Tour/tour.tsx#Tour"]={docgenInfo:Tour.__docgenInfo,name:"Tour",path:"src/components/Tour/tour.tsx#Tour"})}catch(__react_docgen_typescript_loader_error){}try{tour.displayName="tour",tour.__docgenInfo={description:"",displayName:"tour",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},step:{defaultValue:null,description:"",name:"step",required:!1,type:{name:"number"}},defaultStep:{defaultValue:null,description:"",name:"defaultStep",required:!1,type:{name:"number"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"TourStepProps[]"}},getContainer:{defaultValue:null,description:"",name:"getContainer",required:!1,type:{name:"(() => HTMLElement)"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!1,type:{name:"(() => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((currentStep: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Tour/tour.tsx#tour"]={docgenInfo:tour.__docgenInfo,name:"tour",path:"src/components/Tour/tour.tsx#tour"})}catch(__react_docgen_typescript_loader_error){}let Example=()=>{let ref1=(0,react.useRef)(null),ref2=(0,react.useRef)(null),ref3=(0,react.useRef)(null),[open,setOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.Z,{onClick:()=>setOpen(!0),children:" Start Now"}),(0,jsx_runtime.jsx)(Button.Z,{buttonType:"primary",ref:ref1,children:"Primary"}),(0,jsx_runtime.jsx)(Button.Z,{buttonType:"error",ref:ref2,children:"Error"}),(0,jsx_runtime.jsx)(Button.Z,{buttonType:"success",ref:ref3,style:{marginTop:"100vh"},children:"Success"}),(0,jsx_runtime.jsx)(Tour,{open:open,onFinish:()=>setOpen(!1),steps:[{target:()=>ref1.current,placement:"bottom",title:"Step 1",description:"It's a primary button"},{target:()=>ref2.current,renderContent:currentStep=>(0,jsx_runtime.jsxs)("div",{children:["Title: Current Step ",currentStep]}),placement:"bottom"},{target:()=>ref3.current,placement:"bottom",title:"Step 3",description:"Will scroll into view"}]})]})},tour_stories={title:"Basic/Tour",component:Tour,tags:["autodocs"],parameters:{componentSubtitle:"This is Tour",docs:{description:{component:"### How to import\n~~~js\nimport { Tour } from '@eizyui/eizy-ui-react'\n~~~"}}}};Example.parameters={...Example.parameters,docs:{...Example.parameters?.docs,source:{originalSource:'() => {\n  const ref1 = useRef<any>(null);\n  const ref2 = useRef<any>(null);\n  const ref3 = useRef<any>(null);\n  const [open, setOpen] = useState(false);\n  return <>\n      <Button onClick={() => setOpen(true)}> Start Now</Button>\n      <Button buttonType="primary" ref={ref1}>\n        Primary\n      </Button>\n      <Button buttonType="error" ref={ref2}>\n      Error\n      </Button>\n      <Button buttonType="success" ref={ref3} style={{\n      marginTop: \'100vh\'\n    }}>\n        Success\n      </Button>\n      <Tour open={open} onFinish={() => setOpen(false)} steps={[{\n      target: () => ref1.current,\n      placement: \'bottom\',\n      title: "Step 1",\n      description: "It\'s a primary button"\n    }, {\n      target: () => ref2.current,\n      renderContent: (currentStep: number) => {\n        return <div>\n                Title: Current Step {currentStep}\n              </div>;\n      },\n      placement: \'bottom\'\n    }, {\n      target: () => ref3.current,\n      placement: \'bottom\',\n      title: "Step 3",\n      description: "Will scroll into view"\n    }]} />\n    </>;\n}',...Example.parameters?.docs?.source},description:{story:"The Example",...Example.parameters?.docs?.description}}};let __namedExportsOrder=["Example"];try{Example.displayName="Example",Example.__docgenInfo={description:"The Example",displayName:"Example",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Tour/tour.stories.tsx#Example"]={docgenInfo:Example.__docgenInfo,name:"Example",path:"src/components/Tour/tour.stories.tsx#Example"})}catch(__react_docgen_typescript_loader_error){}}}]);